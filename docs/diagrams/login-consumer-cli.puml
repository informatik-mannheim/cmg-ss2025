@startuml login-consumer-cli

skinparam Shadowing false
skinparam ParticipantPadding 20
skinparam BoxPadding 10

actor "GCLS Consumer CLI" as CLI
participant "Consumer Gateway" as Gateway
participant "User Management Service" as UserMgmt

== Registration Flow ==

CLI -> Gateway: POST /auth/register\n{username, password, role}
Gateway -> UserMgmt: Forward registration data
UserMgmt --> Gateway: 201 Created
Gateway --> CLI: 201 Created

note over CLI: User account is now registered and can log in

== Login Flow ==

CLI -> Gateway: POST /auth/login\n{username, password}
Gateway -> UserMgmt: Forward login data
UserMgmt --> Gateway: 200 OK + {token}
Gateway --> CLI: 200 OK + {token}

note over CLI: JWT is stored locally and used in Authorization header for future requests

== Fetch Current User Info ==
CLI -> Gateway: GET /me\nAuthorization: Bearer <token>
Gateway -> UserMgmt: Forward request with token
UserMgmt --> Gateway: 200 OK + { id, username, role }
Gateway --> CLI: 200 OK + user info

@enduml