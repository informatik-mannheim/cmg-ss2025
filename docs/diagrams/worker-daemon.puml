@startuml worker-daemon-sequence

skinparam Shadowing false
skinparam ParticipantPadding 80
skinparam BoxPadding 10

actor "GCLS Worker Daemon" as Worker
participant "Worker Gateway" as Gateway
participant "User Management" as UserManagement
participant "Worker Registry" as Registry

== Worker Daemon Registration ==

Worker -> Gateway: Register me as a new worker
Gateway -> Registry: POST /workers
Registry -> Gateway: OK + workerId
Gateway -> UserManagement: Create authorization Token
UserManagement -> Gateway: OK + token
Gateway -> Worker: OK + workerId + token

note over Worker: Use token + workerId for authenticated requests

@enduml